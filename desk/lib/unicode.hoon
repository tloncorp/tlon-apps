::  unicode utilities
::
|%
++  confusable
  |%
  ::  +con-sig: confusable with '~'
  ++  con-sig  ^~
     ^-  (set @t)
     %-  silt
     :~  'á¿€'
         'â“'
         'Ëœ'
         'âˆ¼'
         '~'
     ==
  ::  +con-hep: confusable '-'
  ++  con-hep
    ^~
    ^-  (set @t)
    %-  silt
    :~  'â€'
        'â€‘'
        'â€’'
        'âˆ’'
        'â€“'
        'âƒ'
        'Û”'
        'â–'
        'Ë—'
        'ï¹˜'
        'â²º'
        '-'
    ==

  ::  +con-a: confusable with 'a'
  ++  con-a
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğ°'
        'a'
        'ï½'
        'ğ‘'
        'ğ—®'
        'ğ•’'
        'ğ–†'
        'ğ“ª'
        'ğšŠ'
        'ğª'
        'Ğ°'
        'É‘'
        'Î±'
        'ğ”'
        'ğ’‚'
        'ğ˜¢'
        'ğ›‚'
        'âº'
        'ğ’¶'
        'ğ™–'
        'ğœ¶'
        'ğ›¼'
        'ğš'
        'ğ–º'
    ==
  ::  +con-b: confusable with 'b'
  ++  con-b
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğ‘'
        'ğ—¯'
        'b'
        'Æ„'
        'ğ•“'
        'ğ–‡'
        'Ğ¬'
        'ğ“«'
        'ğš‹'
        'á'
        'á–¯'
        'ğ”Ÿ'
        'á‘²'
        'ğ’ƒ'
        'ğ˜£'
        'ğ’·'
        'ğ™—'
        'ğ›'
        'ğ–»'
    ==
  ::  +con-c: confusable with 'c'
  ++  con-c
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğ‘'
        'ğ—°'
        'Ñ'
        'c'
        'ï½ƒ'
        'ğ•”'
        'á´„'
        'â²¥'
        'ğ½'
        'ğ–ˆ'
        'ğ“¬'
        'ğšŒ'
        'ê®¯'
        'ğ” '
        'Ï²'
        'ğ’„'
        'ğ˜¤'
        'ğ’¸'
        'ğ™˜'
        'ğœ'
        'ğ–¼'
        'â…½'
    ==
  ::  +con-d: confusable with 'd'
  ++  con-d
    ^~
    ^-  (set @t)
    %-  silt
    :~  'Ô'
        'ğ“­'
        'ğš'
        'd'
        'â…†'
        'ğ‘‘'
        'ğ—±'
        'á§'
        'ğ’…'
        'ğ˜¥'
        'ğ–‰'
        'á‘¯'
        'ê“’'
        'ğ'
        'ğ–½'
        'ğ”¡'
        'ğ••'
        'â…¾'
        'ğ’¹'
        'ğ™™'
    ==
  ::  +con-e: confusable with 'e'
  ++  con-e
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğ“®'
        'ğš'
        'e'
        'ï½…'
        'ğ‘’'
        'ğ—²'
        'â…‡'
        'ğ’†'
        'ğ˜¦'
        'â„®'
        'ğ–Š'
        'â„¯'
        'ğ'
        'ğ–¾'
        'ê¬²'
        'Ğµ'
        'ğ”¢'
        'ğ•–'
        'Ò½'
        'ğ™š'
    ==
  ::  +con-f: confusable with 'f'
  ++  con-f
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğ“¯'
        'ğš'
        'Ö„'
        'ğ‘“'
        'ğ—³'
        'f'
        'ğ’‡'
        'ğ˜§'
        'ğ–‹'
        'ğŸ'
        'ğ–¿'
        'ğ”£'
        'ê¬µ'
        'ğ•—'
        'ê™'
        'ğ’»'
        'ğ™›'
        'áº'
        'Å¿'
    ==
  ::  +con-g: confusable with 'g'
  ++  con-g
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğ“°'
        'ğš'
        'É¡'
        'Ö'
        'á¶ƒ'
        'ğ‘”'
        'ğ—´'
        'g'
        'ï½‡'
        'ğ’ˆ'
        'ğ˜¨'
        'â„Š'
        'ğ–Œ'
        'Æ'
        'ğ '
        'ğ—€'
        'ğ”¤'
        'ğ•˜'
        'ğ™œ'
    ==
  ::  +con-h: confusable with 'h'
  ++  con-h
    ^~
    ^-  (set @t)
    %-  silt
    :~  'á‚'
        'ğ–'
        'ğ“±'
        'ğš‘'
        'h'
        'ï½ˆ'
        'ğ”¥'
        'â„'
        'ğ’‰'
        'ğ˜©'
        'Õ°'
        'ğ’½'
        'ğ™'
        'ğ¡'
        'ğ—'
        'ğ—µ'
        'Ò»'
        'ğ•™'
    ==
  ::  +con-i: confusable with 'i'
  ++  con-i
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğ“²'
        'ğ²'
        'ê™‡'
        'â…ˆ'
        'ï½‰'
        'ğ”¦'
        'ğ˜ª'
        'Ó'
        'ğ™'
        'ğš¤'
        'ğ¢'
        'Ñ–'
        'ğ‘–'
        'Ë›'
        'ğ•š'
        'ğ–'
        'á¥'
        'ğš’'
        'ğ‘£ƒ'
        'i'
        'É©'
        'Éª'
        'ğ’Š'
        'ğ›Š'
        'â…°'
        'Ä±'
        'ğ’¾'
        'ğœ¾'
        'â³'
        'ğœ„'
        'ê­µ'
        'ğ—‚'
        'ğ¸'
        'â„¹'
        'Î¹'
        'ğ—¶'
        'Íº'
    ==
  ::  +con-j: confusable with 'j'
  ++  con-j
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğ–'
        'ğ“³'
        'ğš“'
        'â…‰'
        'ğ”§'
        'j'
        'ï½Š'
        'ğ’‹'
        'ğ˜«'
        'ğ’¿'
        'ğ™Ÿ'
        'Ï³'
        'ğ£'
        'ğ—ƒ'
        'Ñ˜'
        'ğ‘—'
        'ğ—·'
        'ğ•›'
    ==
  ::  +con-k: confusable with 'k'
  ++  con-k
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğ–'
        'ğ“´'
        'ğš”'
        'ğ”¨'
        'k'
        'ğ’Œ'
        'ğ˜¬'
        'ğ“€'
        'ğ™ '
        'ğ¤'
        'ğ—„'
        'ğ‘˜'
        'ğ—¸'
        'ğ•œ'
    ==
  ::  +con-l: confusable with 'l'
  ++  con-l
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğš°'
        'ğ˜­'
        'Ğ†'
        'ğ–¨'
        'ğ¥'
        'ïº'
        'ïº'
        'ğ”©'
        'â„'
        'â„‘'
        'ğŠŠ'
        'â²’'
        'ğŒ‰'
        'â„“'
        'ğœ¤'
        'Æ–'
        'ğ˜'
        'Î™'
        'ğš•'
        'ğŸ'
        'âˆ£'
        'Ø§'
        'ï¼©'
        'ğ—…'
        'ğ•€'
        '1'
        'ğ™„'
        'ğ“'
        'ğŒ '
        'ğ¼'
        'ğ¸€'
        'ğº€'
        '×€'
        'ğ‘°'
        'Ç€'
        'Ó€'
        'á›'
        'ğŸ­'
        'ğ•´'
        'I'
        'ßŠ'
        'ï½Œ'
        'ğ›ª'
        'âµ'
        'ğ'
        'ğ•'
        'ğŸ£'
        '×•'
        'ğ£‡'
        'ğ™¡'
        'ğ“˜'
        'ğ—œ'
        'ğŸ™'
        'ğ‘™'
        '×Ÿ'
        'â… '
        'ğ˜'
        'Ù¡'
        'ğ’'
        'ğ–‘'
        'ï¿¨'
        'ğŸ¯±'
        'ğˆ'
        'l'
        'Û±'
        'ê“²'
        'ğ–¼¨'
        'ğ™¸'
        'ğŸ·'
        'ğ“µ'
        '|'
        'â…¼'
        'â½'
        'ğ—¹'
    ==
  ::  +con-m: confusable with 'm'
  ++  con-m
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğ‘œ€'
        'ğ’'
        'ğ˜®'
        'ğ‘££'
        'ğ–’'
        'ğ¦'
        'ğ—†'
        'm'
        'ğ”ª'
        'ğ•'
        'ğ“‚'
        'ğ™¢'
        'ğ“¶'
        'ğš–'
        'r'
        'n'
        'ğ‘š'
        'ğ—º'
        'â…¿'
    ==
  ::  +con-n: confusable with 'n'
  ++  con-n
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğ’'
        'ğ˜¯'
        'ğ–“'
        'ğ§'
        'ğ—‡'
        'ğ”«'
        'n'
        'ğ•Ÿ'
        'ğ“ƒ'
        'ğ™£'
        'Õ¸'
        'ğ“·'
        'ğš—'
        'Õ¼'
        'ğ‘›'
        'ğ—»'
    ==
  ::  +con-o: confusable with 'o'
  ++  con-o
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğ˜°'
        'à°‚'
        'à²‚'
        'à´‚'
        'à¶‚'
        'Ö…'
        'ğ¨'
        'ğ‘£—'
        'ğ”¬'
        'á´'
        'á´‘'
        'ğ¹¤'
        'ğ“ª'
        'ğš˜'
        'ğ‘£ˆ'
        'á€'
        'â²Ÿ'
        'ğ›'
        'à´ '
        'ğ›”'
        'ï®¦'
        'ï®§'
        'ğ—ˆ'
        'ğˆ'
        'ï®¨'
        'ï®©'
        'ï®ª'
        'ï®«'
        'ï®¬'
        'ï®­'
        'ğº„'
        'â„´'
        'ğ„'
        'ğ¸'
        'ğ¼'
        'ê¬½'
        'Ğ¾'
        'Ú¾'
        'Î¿'
        'á€'
        'Û'
        'Ïƒ'
        'Ù‡'
        'ï½'
        'à¹'
        'à»'
        'ğ• '
        'ğ¬'
        'ğ¸¤'
        'ğ™¤'
        'Û•'
        'ğ‘œ'
        'ğ’'
        '×¡'
        'ğœ'
        'ğ–”'
        'Ù¥'
        'à¥¦'
        'à©¦'
        'à«¦'
        'à¯¦'
        'à±¦'
        'à³¦'
        'àµ¦'
        'ï»©'
        'ï»ª'
        'ï»«'
        'ï»¬'
        'ğœŠ'
        'o'
        'ğ¾'
        'Ûµ'
        'ğ‚'
        'ğ“¸'
        'ğ—¼'
        'áƒ¿'
    ==
  ::  +con-p: confusable with 'p'
  ++  con-p
    ^~
    ^-  (set @t)
    %-  silt
    :~  'Ñ€'
        'Ï'
        'ğ”­'
        'ğ˜±'
        'ğ™¥'
        'ğ©'
        'ï½'
        'ğ› '
        'ğ‘'
        'ğ•¡'
        'ğ–•'
        'ğœš'
        'ğš™'
        'ğ'
        'â²£'
        'ğ”'
        'ğ›’'
        'ğ’‘'
        'ğŸˆ'
        'ğ†'
        'ğ“…'
        'ğœŒ'
        'ğ—‰'
        'p'
        'ğ€'
        'Ï±'
        'ğ—½'
        'â´'
        'ğº'
        'ğ“¹'
    ==
  ::  +con-q: confusable with 'q'
  ++  con-q
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğ”®'
        'Õ£'
        'ğ’’'
        'ğ˜²'
        'Õ¦'
        'ğ“†'
        'ğ™¦'
        'ğª'
        'ğ—Š'
        'q'
        'ğ‘'
        'ğ—¾'
        'ğ•¢'
        'ğ––'
        'Ô›'
        'ğ“º'
        'ğšš'
    ==
  ::  +con-r: confusable with 'r'
  ++  con-r
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğ”¯'
        'ê®'
        'ğ’“'
        'ğ˜³'
        'â²…'
        'á´¦'
        'ê­‡'
        'ê­ˆ'
        'ğ“‡'
        'ğ™§'
        'ğ«'
        'ğ—‹'
        'ğ‘Ÿ'
        'ğ—¿'
        'r'
        'Ğ³'
        'ğ•£'
        'ğ–—'
        'ğ“»'
        'ğš›'
    ==
  ::  +con-s: confusable with 's'
  ++  con-s
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğ”°'
        'ğ‘£'
        'ğ’”'
        'ğ˜´'
        'ğ“ˆ'
        'ğ™¨'
        'ê®ª'
        'ğ¬'
        'ğ—Œ'
        'ğ‘ '
        'ğ˜€'
        'êœ±'
        's'
        'ï½“'
        'ğ•¤'
        'Ñ•'
        'ğ–˜'
        'ğ“¼'
        'ğšœ'
        'ğ‘ˆ'
        'Æ½'
    ==
  ::  +con-t: confusable with 't'
  ++  con-t
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğ­'
        'ğ—'
        'ğ”±'
        'ğ•¥'
        'ğ“‰'
        'ğ™©'
        'ğ“½'
        'ğš'
        't'
        'ğ‘¡'
        'ğ˜'
        'ğ’•'
        'ğ˜µ'
        'ğ–™'
    ==
  ::  +con-u: confusable with 'u'
  ++  con-u
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğ®'
        'Ï…'
        'ğ”²'
        'ğ‘£˜'
        'ğ•¦'
        'Ê‹'
        'ğ™ª'
        'ê­'
        'ğ“¶'
        'ğš'
        'ê­’'
        'ğ‘¢'
        'ğ’–'
        'ğ›–'
        'á´œ'
        'ğ–š'
        'êŸ'
        'ğœ'
        'ğ—'
        'ğ“Š'
        'ğŠ'
        'ğ“¾'
        'ğ¾'
        'ğ„'
        'u'
        'ğ˜‚'
        'ğ˜¶'
        'Õ½'
    ==
  ::  +con-v: confusable with 'v'
  ++  con-v
    ^~
    ^-  (set @t)
    %-  silt
    :~  'â‹'
        'ğ¯'
        'ğ”³'
        'ğ•§'
        'ğ™«'
        'ğšŸ'
        'ğ‘£'
        'ï½–'
        '×˜'
        'ğ’—'
        'ğ–›'
        'á´ '
        'ğ—'
        'ğ‘£€'
        'ğ›'
        'âˆ¨'
        'ğœˆ'
        'ê®©'
        'ğ“‹'
        'ğ“¿'
        'â…´'
        'ğ˜ƒ'
        'Ñµ'
        'v'
        'ğ‚'
        'ğ˜·'
        'ğ¶'
        'ğ‘œ†'
        'ğ¼'
        'Î½'
    ==
  ::  +con-w: confusable with 'w'
  ++  con-w
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğ°'
        'ğ—'
        'á´¡'
        'Ñ¡'
        'Õ¡'
        'ê®ƒ'
        'ğ”´'
        'ğ•¨'
        'ğ“Œ'
        'ğ™¬'
        'É¯'
        'ğ”€'
        'ğš '
        'ğ‘œ'
        'ğ‘œ'
        'ğ‘¤'
        'ğ˜„'
        'w'
        'ğ’˜'
        'ğ˜¸'
        'ğ–œ'
        'Ô'
        'ğ‘œŠ'
    ==
  ::  +con-x: confusable with 'x'
  ++  con-x
    ^~
    ^-  (set @t)
    %-  silt
    :~  'á•'
        'ğ“'
        'ğ™­'
        'Ñ…'
        'ğ±'
        'ğ—‘'
        'â¤«'
        'ğ‘¥'
        'ğ˜…'
        'â¤¬'
        'á™®'
        'â¨¯'
        'ğ•©'
        'ğ–'
        'Ã—'
        'ğ”'
        'ğš¡'
        'x'
        'ï½˜'
        'â…¹'
        'ğ”µ'
        'á•½'
        'ğ’™'
        'ğ˜¹'
    ==
  ::  +con-y: confusable with 'y'
  ++  con-y
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğ™®'
        'Ñƒ'
        'ğ²'
        'ğ²'
        'ğ‘¦'
        'á¶Œ'
        'ğ¬'
        'ğ‘£œ'
        'ğ•ª'
        'Ê'
        'ğ–'
        'ğš¢'
        'ï½™'
        'ê­š'
        'ğ’š'
        'ğ“'
        'É£'
        'ğ—’'
        'áƒ§'
        'ğ˜†'
        'Ò¯'
        'ğ›¾'
        'Î³'
        'ğ›„'
        'ğ”‚'
        'ğœ¸'
        'y'
        'ğ”¶'
        'â„½'
        'ğ˜º'
        'á»¿'
    ==
  ::  +con-z: confusable with 'z'
  ++  con-z
    ^~
    ^-  (set @t)
    %-  silt
    :~  'ğ“'
        'ğ™¯'
        'á´¢'
        'ğ³'
        'ğ—“'
        'ğ‘£„'
        'ğ‘§'
        'ğ˜‡'
        'ğ•«'
        'ğ–Ÿ'
        'ê®“'
        'ğ”ƒ'
        'ğš£'
        'ğ”·'
        'z'
        'ğ’›'
        'ğ˜»'
    ==
  ::  con-latin: latin confusables
  ++  con-latin
    ^~
    ^-  (list (pair @t (set @t)))
    :~  ['a' con-a]
        ['b' con-b]
        ['c' con-c]
        ['d' con-d]
        ['e' con-e]
        ['f' con-f]
        ['g' con-g]
        ['h' con-h]
        ['i' con-i]
        ['j' con-j]
        ['k' con-k]
        ['l' con-l]
        ['m' con-m]
        ['n' con-n]
        ['o' con-o]
        ['p' con-p]
        ['q' con-q]
        ['r' con-r]
        ['s' con-s]
        ['t' con-t]
        ['u' con-u]
        ['v' con-v]
        ['w' con-w]
        ['x' con-x]
        ['y' con-y]
        ['z' con-z]
  ==
  ::  +norm-latin-wide: normalize full-width latin character
  ::
  ++  norm-latin-wide
    |=  =@t
    ^-  @t
    =+  c=(taft t)
    ::  ascii wide characters are respresented in the
    ::  range U+FF01 - U+FF5E.
    ?.  &((gte c 0xff01) (lte c 0xff5e))  t
    (add (sub c 0xff00) 0x20)
  ::  +norm-latin: normalize latin character
  ::
  ++  norm-latin
    |=  c=@t
    ^-  @t
    =/  conf=(list (pair @t (set @t)))
      con-latin
    |-
    ?~  conf  c
    ?:  (~(has in q.i.conf) c)
      p.i.conf
    $(conf t.conf)
  ::  +norm-p: normalize a @p string
  ::
  ++  norm-p
    |=  txt=@t
    ^-  @t
    =|  norm=@t
    |-
    =+  len=(teff txt)
    =+  c=(end [3 len] txt)
    ?:  =('' c)  norm
    =/  n=@t
      ?:  (~(has in con-sig) c)  '~'
      ?:  (~(has in con-hep) c)  '-'
      (norm-latin-wide (norm-latin c))
    $(norm (cat 3 norm n), txt (rsh [3 len] txt))
  --
--
